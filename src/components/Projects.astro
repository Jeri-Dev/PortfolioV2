---
import ProjectCard from "./ProjectCard.astro"
import { projects } from "../data/projects"
---

<main class="flex items-center justify-center min-h-screen py-20" id="projects">
	<div class="max-w-4xl mx-auto w-full px-4 sm:px-6 lg:px-8">
		<div class="text-center mb-12">
			<h2
				class="text-4xl font-bold tracking-tight text-slate-900 dark:text-white sm:text-5xl"
			>
				Projects
			</h2>
			<p
				class="mt-4 max-w-2xl mx-auto text-lg text-slate-500 dark:text-slate-400"
			>
				A selection of my recent work, showcasing my skills in full-stack and
				mobile development with Flutter.
			</p>
		</div>

		<div class="flex justify-center mb-8">
			<div
				class="inline-flex rounded-lg bg-slate-200 dark:bg-slate-800 p-1 gap-1"
			>
				<button
					data-filter="all"
					class="filter-btn px-6 py-2.5 text-sm font-semibold rounded-md transition-all active cursor-pointer"
				>
					All Projects
				</button>
				<button
					data-filter="web"
					class="filter-btn px-6 py-2.5 text-sm font-semibold rounded-md transition-all cursor-pointer"
				>
					Web
				</button>

				<button
					data-filter="api"
					class="filter-btn px-6 py-2.5 text-sm font-semibold rounded-md transition-all cursor-pointer"
				>
					API
				</button>
			</div>
		</div>

		<div class="space-y-16" id="projects-container">
			{
				projects.map((project, index) => (
					<div data-project-type={project.type} class="project-item">
						<ProjectCard
							title={project.title}
							description={project.description}
							image={project.image}
							projectUrl={project.projectUrl}
							githubUrl={project.githubUrl}
							type={project.type}
							reverse={index % 2 !== 0}
						/>
					</div>
				))
			}
		</div>
	</div>
</main>

<style>
	.filter-btn {
		color: var(--slate-600);
	}

	:global(.dark) .filter-btn {
		color: var(--slate-400);
	}

	.filter-btn.active {
		background-color: var(--primary);
		color: white;
	}

	.filter-btn:hover:not(.active) {
		background-color: var(--slate-300);
	}

	:global(.dark) .filter-btn:hover:not(.active) {
		background-color: var(--slate-700);
	}

	.project-item {
		transition:
			opacity 0.3s ease,
			transform 0.3s ease;
	}

	.project-item.hidden {
		display: none;
	}
</style>

<script>
	document.addEventListener("DOMContentLoaded", () => {
		const filterButtons = document.querySelectorAll(".filter-btn")
		const projectItems = document.querySelectorAll(".project-item")

		filterButtons.forEach((button) => {
			button.addEventListener("click", () => {
				const filter = button.getAttribute("data-filter")

				// Update active button
				filterButtons.forEach((btn) => btn.classList.remove("active"))
				button.classList.add("active")

				// Filter projects
				projectItems.forEach((item) => {
					const projectType = item.getAttribute("data-project-type")

					if (filter === "all" || projectType === filter) {
						item.classList.remove("hidden")
					} else {
						item.classList.add("hidden")
					}
				})
			})
		})
	})
</script>
